{"componentChunkName":"component---src-templates-blog-post-js","path":"/jquery-ch3-ajax-post/","result":{"data":{"site":{"siteMetadata":{"title":"ByeongChan"}},"markdownRemark":{"id":"38c59979-b634-5ec8-862d-dd2bfcd4852e","excerpt":"w3schools.com 참조해서 공부 AJAX( Asynchronous Javascript and XML )란, 자바스크립트와 XML…","html":"<style>\n    .test01 {\n        border-radius: 5px;\n        background-color: black;\n        color: white;\n        margin: 20px;\n        padding: 10px\n    }\n</style>\n<head>\n<script src=\"https://code.jquery.com/jquery-1.11.3.js\"></script>\n<script type=\"text/javascript\">\n    $(document).ready(function() {\n            $(\"#execute\").click(function() {\n                $.ajax({\n                    type: \"GET\",\n                    url:\"./test.json\",\n                    dataType:\"JSON\",\n                    success: function(data) {\n                        $(\".content\").html(\"name: \"+ data.name+\"<br/>\"\n                            +\"age: \"+ data.age+\"<br/>\"\n                            +\"major: \"+data.major+\"<br/>\");\n                    },\n                    error: function(xhr, status, error) {\n                        alert(\"ERROR!!\");\n                    }\n                })\n            })\n        })    \n</script>\n</head>\n<p><a href=\"https://www.w3schools.com/jquery/jquery_ajax_intro.asp\">w3schools.com 참조해서 공부</a></p>\n<p>AJAX( Asynchronous Javascript and XML )란, 자바스크립트와 XML을 <code class=\"language-text\">비동기</code>적으로 처리하는 기법을 말한다.</p>\n<p>여기서 <code class=\"language-text\">비동기</code>라는 것은 일반적인 코드의 흐름이 아닌 다른 흐름으로 접근한다는 의미이다. 쓰레드로서 여러가지 방법으로 설명될 수 있는 개념이지만, 단순하게 일반적인 흐름과는 다르게 동작한다고 이해하고 넘어가면 될 것 같다.</p>\n<p>그럼 웹에서 비동기적인 방법은 어떻게 사용될까?</p>\n<p>네이버 메일을 예로 들어보면, 메일을 체크하고 검색하고 삭제 등 처리를 할 때 페이지가 새로고침 되지 않고 메일 리스트 바뀌는 것을 확인할 수 있다. AJAX는 웹에서 전체 페이지를 reload할 필요없이 특정 영역만을 reload하는 것을 말한다.</p>\n<p>이곳에서는 <code class=\"language-text\">json으로부터</code> value를 얻는 방법을 정리할 것이다.</p>\n<h2>JSON 파일</h2>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MBC\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"age\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"26\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"major\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"info-communication\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>json은 {}안에 <code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code>로 이루어져있다. <code class=\"language-text\">:</code> 기준으로 왼쪽이 key, 오른쪽이 value이다. key값을 불러와 그 키에 해당하는 value를 가져올 때 유용하게 사용된다.</p>\n<p>위 예제에서는 name, age, major 3개의 key값으로만 구성했다.</p>\n<h2>Jquery에서 AJAX 기본 사용법</h2>\n<p>Jquery에서는 AJAX를 지원하는 다양한 함수들이 있다. 여기서는 그 중 JSON통신만 하기 위해 사용되는 함수만 사용하려고 한다.</p>\n<p>자세한 함수는 <a href=\"https://www.w3schools.com/jquery/jquery_ref_ajax.asp\">w3schools.com</a> 여기를 참조!</p>\n<h3>AJAX 예제 1 (GET)</h3>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://code.jquery.com/jquery-1.11.3.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n      <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">ready</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#execute\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          $<span class=\"token punctuation\">.</span><span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            type<span class=\"token operator\">:</span> <span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">,</span>\n            url<span class=\"token operator\">:</span> <span class=\"token string\">\"./test.json\"</span><span class=\"token punctuation\">,</span>\n            dataType<span class=\"token operator\">:</span> <span class=\"token string\">\"JSON\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function-variable function\">success</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".content\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">html</span><span class=\"token punctuation\">(</span>\n                <span class=\"token string\">\"name: \"</span> <span class=\"token operator\">+</span>\n                  data<span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span>\n                  <span class=\"token string\">\"&lt;br/>\"</span> <span class=\"token operator\">+</span>\n                  <span class=\"token string\">\"age: \"</span> <span class=\"token operator\">+</span>\n                  data<span class=\"token punctuation\">.</span>age <span class=\"token operator\">+</span>\n                  <span class=\"token string\">\"&lt;br/>\"</span> <span class=\"token operator\">+</span>\n                  <span class=\"token string\">\"major: \"</span> <span class=\"token operator\">+</span>\n                  data<span class=\"token punctuation\">.</span>major <span class=\"token operator\">+</span>\n                  <span class=\"token string\">\"&lt;br/>\"</span>\n              <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token function-variable function\">error</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">xhr<span class=\"token punctuation\">,</span> status<span class=\"token punctuation\">,</span> error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ERROR!!\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>execute<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>execute<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>this is MBC<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Hello<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<body>\n    <div class=\"test01\">\n        <input type=\"button\" id=\"execute\" value=\"execute\" />\n        <div>\n            <p>this is MBC</p>\n            <p class=\"content\"></p>\n            <p>Hello</p>\n        </div>\n    </div>\n</body>\n<p><code class=\"language-text\">$.ajxa()</code>는 JQuery에서 지원하는 함수이다. 이 함수 안에 AJAX를 정의하는 내용을 작성한다.</p>\n<p><code class=\"language-text\">type</code> : http 통신 방식인 GET / POST를 선택한다. JSON데이터를 받으려 하니 GET으로 설정했다. POST는 데이터를 보낼때 사용된다.</p>\n<p><code class=\"language-text\">url</code> : 비동기적으로 데이터를 받을 url을 설정한다. JSON데이터를 받기위해 json파일로 설정했다.</p>\n<p><code class=\"language-text\">dataType</code> : 말그대로 dataType이다.</p>\n<p><code class=\"language-text\">success</code> : AJAX 통신이 성공할 때 동작한다. 위 예제는 function이 바로 실행되게 만들었고 data라는 매개변수를 받는다. <code class=\"language-text\">data 매개변수</code>는 json으로 부터 받는 데이터를 말한다.</p>\n<p><code class=\"language-text\">error</code> : AJAX 통신이 실패할 때 동작한다. 간단하게 에러코드를 작성하면 된다.</p>\n<p>대표적인 예를 살펴보았으니 이제 버튼을 클릭해보자.</p>\n<p>error가 발생하는 것이 당연한데, json 통신은 서버가 실행된 상태에서 동작해야한다. 로컬에서 바로 접근할 수는 없는 듯 하다. 서버를 구동시키는 것은 여기서 다루지 않겠다.</p>\n<p>서버가 정상적으로 동작하고 있는 상태라면 json.json파일에 있던</p>\n<p>“name”: “MBC”,\n“age”: “26”,\n“major”: “info-communication”</p>\n<p>가 출력될 것이다.</p>\n<h3>AJAX 예제 2 (POST)</h3>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://code.jquery.com/jquery-1.11.3.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>execute<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>execute<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>this is MBC<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>testData<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1111<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#execute\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> testDataObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> data<span class=\"token operator\">:</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#testData\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">val</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n      $<span class=\"token punctuation\">.</span><span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        type<span class=\"token operator\">:</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">,</span>\n        url<span class=\"token operator\">:</span> <span class=\"token string\">\"./test2.html\"</span><span class=\"token punctuation\">,</span>\n        dataType<span class=\"token operator\">:</span> <span class=\"token string\">\"JSON\"</span><span class=\"token punctuation\">,</span>\n        data<span class=\"token operator\">:</span> testDataObj<span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">success</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token function-variable function\">error</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">xhr<span class=\"token punctuation\">,</span> status<span class=\"token punctuation\">,</span> error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ERROR!!\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>이번엔 POST 방식으로 데이터를 넘기는 예제이다.</p>\n<p>데이터를 넘기는 방식은 JSON, text 등으로 넘겨줄 수 있는데 이번 예제에서는 json으로 넘겨준다.</p>\n<p>json으로 넘겨줄 때 자바스크립트 오브젝트를 생성해 주면서 “data”라는 key, input에 저장되어있는 1111 value를 넣어주었다.</p>\n<p>test2.html에서 key “data”를 받아서 데이터를 확인해보면 정상적으로 데이터 송수신이 이뤄지는 것을 확인 할 수 있다.</p>\n<p>이처럼 POST나 GET, CRUD OPERATION을 적용해 데이터를 다른 웹 페이지 또는 DB로 넘겨줄 수 있다.</p>","frontmatter":{"title":"[Jquery] AJAX의 기초 / 사용 방법","date":"March 23, 2020","description":null}}},"pageContext":{"slug":"/jquery-ch3-ajax-post/","previous":{"fields":{"slug":"/jquery-ch1-effect-post/"},"frontmatter":{"title":"[Jquery] 셀렉터 접근 방법, 클릭 이벤트(hide, show, toggle)"}},"next":{"fields":{"slug":"/android-ch8-webview-post/"},"frontmatter":{"title":"[Android] Webview와 Javascript 연동(Eclipse, Tomcat, Jquery)"}}}},"staticQueryHashes":["1246554614","2841359383"]}